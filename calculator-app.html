<!DOCTYPE html>
<html lang="en">
<head>
    <title>Build Calculator App</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HCERBDV76D"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-HCERBDV76D');
    </script>
    <meta name="msvalidate.01" content="B0487B46A104E90209E8A3BEA24ECA0E" />
    <meta name="yandex-verification" content="f044b3a12c7918f1" />
    <!--end-->
    <meta content="learn about data types, variables, lists, tuples, dictionaries,if else,DSA,loops,user-defined functions, oop, threading and scripting." name="description"/>
    <meta name="author" content="learnPython"/>
    <meta name="keywords" content="Learn Python for free,learn python for beginners,Core Python,Web frameworks,Multiprocess architecture,Serverside templating language,python tutorials,python4"/>
    <meta property="og:type" content="website" />
    
    <meta name=”geo.region” content="US-CA" />
    <meta name=”geo.placename” content="353 Jane Stanford Way, Stanford, CA 94305, United States" />
    <meta name=”geo.position” content="37.430089898615456;-122.17332683124829"/>
    <meta name=”ICBM” content="37.430089898615456, -122.17332683124829" />
    <link href='https://pythonread.github.io/?m=1' rel='alternate'/>

    <link href="/favicon.png" rel="icon" />
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link type="text/css" rel="stylesheet" href="/style1.css" media="all" />

    <link type="text/css" rel="stylesheet" href="/style2.css" media="all" />
    <link type="text/css" rel="stylesheet" href="/style0.css" media="all" />
    
    <!--<![endif]-->
</head>
<body>
    
    <div class="nav-wrapper" >
        <div class="container">
            <nav>
                <div class="logo wave">
                    <a href="/" id="logo">
                        Python Tutorial
                    </a>
                </div>
                <div class="nav-toggle-icon" id="nav-toggle-icon" onclick="mobileMenu()">
                    <div class="material-hamburger">
                        <span>
                        </span>
                        <span>
                        </span>
                        <span>
                        </span>
                    </div>
                </div>
                <div class="menu-wrapper" id="menu-wrapper">
                    <div class="nav-indicator">
                    </div>
                    <ul class="menus">
                        <li>
                            <a class="wave" href="/">
                                Home
                            </a>
                        </li>
                        <li>
                            <a class="wave" href="/projects.html">
                                Projects
                            </a>
                        </li>
                        <li>
                            <a class="wave" href="/free-course.html" 
                                target="_blank">
                                Free Course
                            </a>
                        </li>
                        <li>
                            <a class="wave" href="/dsa.html" >
                                DSA
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <div style="margin-left:10px ; margin-top: 15px; ">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/uwSY9XqQGXw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> 
    </div >
    <section class="f-article " style="margin-left:10px; margin-top:15px; margin-right:10px;">
        <nav class="article-series">
        <header class="series-header">
        <h4 class="series-title">JavaScript projects for beginners <span>(8 part
        series)</span></h4>
        </header>
        <ul class="series-list">
        <li>
        <a href="https://www.youtube.com/watch?v=IbSXF7eT-AU&list=PLR_5PTwg_uAQw40OhdvAwN4NvzWv0xOZ2">
        <span class="number">1</span>
        <span class="title"> Build your first JavaScript App — A Random Quote Generator </span>
        </a>
        </li>
        <li>
        <a href="https://www.youtube.com/watch?v=IbSXF7eT-AU&list=PLR_5PTwg_uAQw40OhdvAwN4NvzWv0xOZ2">
        <span class="number">2</span>
        <span class="title"> How to build a Wikipedia Search App with JavaScript </span>
        </a>
        </li>
        <li>
        <a class="current-post">
        <span class="number">3</span>
        <span class="title"> How to build a Calculator App with JavaScript </span>
        </a>
        </li>
        <li>
        <a href="https://www.youtube.com/watch?v=IbSXF7eT-AU&list=PLR_5PTwg_uAQw40OhdvAwN4NvzWv0xOZ2">
        <span class="number">4</span>
        <span class="title"> How to build a Todo List App with JavaScript </span>
        </a>
        </li>
        <li>
        <a href="https://www.youtube.com/watch?v=IbSXF7eT-AU&list=PLR_5PTwg_uAQw40OhdvAwN4NvzWv0xOZ2">
        <span class="number">5</span>
        <span class="title"> How to build a Custom HTML5 Video Player with JavaScript </span>
        </a>
        </li>
        <li>
        <a href="https://www.youtube.com/watch?v=IbSXF7eT-AU&list=PLR_5PTwg_uAQw40OhdvAwN4NvzWv0xOZ2">
        <span class="number">6</span>
        <span class="title"> How to build a Simon Game with JavaScript </span>
        </a>
        </li>
        <li>
        <a href="https://www.youtube.com/watch?v=IbSXF7eT-AU&list=PLR_5PTwg_uAQw40OhdvAwN4NvzWv0xOZ2">
        <span class="number">7</span>
        <span class="title"> How to build a Pomodoro Timer App with JavaScript </span>
        </a>
        </li>
        <li>
        <a href="https://www.youtube.com/watch?v=IbSXF7eT-AU&list=PLR_5PTwg_uAQw40OhdvAwN4NvzWv0xOZ2">
        <span class="number">8</span>
        <span class="title"> How to create your first Chrome extension </span>
        </a>
        </li>
        </ul>
        </nav>
        <p>The calculator app we’ll develop in this tutorial is a very simple one. It is
        more or less in the manner of those calculators found at grocery stores. The layout
        of the app was crafted with <abbr title="Cascading Style Sheets">CSS</abbr>
        grid. If you’d like to learn how it was achieved, be sure to check out <a href="https://www.youtube.com/watch?v=IbSXF7eT-AU&list=PLR_5PTwg_uAQw40OhdvAwN4NvzWv0xOZ2">this
        tutorial</a> as this one focuses only
        on the JavaScript logic employed to make the calculator work.</p>
        <figure>
        <img src="https://ik.imagekit.io/freshman/ezgif-5-abbedec67296_bOO8D3Dt714.gif" alt="JavaScript Calculator demo" loading="lazy" width="400" height="509">
        </figure>
        <p>Here’s a <a href="https://freshman-calculator.surge.sh/">live demo</a> of the completed
        project. You can play around with it to get a feel of what you’ll be building
        before diving in.</p>
        <h2 id="prerequisites"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#prerequisites" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Prerequisites</h2>
        <p>This tutorial assumes that you have a basic knowledge of JavaScript. I’m going
        to break down each step as best as I can so it should be easy to follow even if
        you have no prior experience with building applications in the browser.</p>
        <h2 id="before-you-begin"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#before-you-begin" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Before you begin</h2>
        <p>You can find the <a href="https://jsfiddle.net/ayoisaiah/jwy9vhx5/2/">starting point</a>
        for this tutorial on JSFiddle. It contains all the necessary markup and styles
        used to build the calculator layout. The markup is almost identical to the
        final state of the <a href="https://www.youtube.com/watch?v=IbSXF7eT-AU&list=PLR_5PTwg_uAQw40OhdvAwN4NvzWv0xOZ2">previous
        tutorial</a> in which I discussed how
        the calculator layout was crafted, but I made a few minor changes so make sure
        to use this one instead.</p>
        <p>Start by forking the code to a new fiddle, and follow along by typing each step
        out till the end. Feel free to do this tutorial on other online code playgrounds
        or on your local machine if you prefer.</p>
        <h2 id="getting-started"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#getting-started" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Getting started</h2>
        <p>Anyone should be able to perform the four most common arithmetic operations
        (addition, subtraction, multiplication and division) on our calculator app by
        constructing a valid expression using the input buttons, and have the result
        displayed on the screen. An example of a valid expression is shown below:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plaintext" data-lang="plaintext">12 + 10</code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>To construct a valid arithmetic expression, we need to keep track of a few
        things: the first operand (<code>12</code>), the operator (<code>+</code>) and the second operand
        (<code>10</code>).</p>
        <p>Let’s start by creating an object to help us keep track of these values. Add the
        following code at top of the JavaScript pane in JSFiddle:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">calculator</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">displayValue</span><span class="o">:</span> <span class="s1">'0'</span><span class="p">,</span>
          <span class="nx">firstOperand</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="nx">waitingForSecondOperand</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="nx">operator</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="p">};</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>The <code>calculator</code> object above consists of everything that we need to construct
        a valid expression:</p>
        <ul>
        <li><code>displayValue</code> holds a string value that represents the input of the user or
        the result of an operation. It’s how we keep track of what should be displayed
        on the screen.</li>
        <li><code>firstOperand</code> will store the first operand for any expression. It’s set to
        <code>null</code> for now.</li>
        <li>The <code>operator</code> key will store the operator for an expression. Its initial value
        is also <code>null</code>.</li>
        <li><code>waitingForSecondOperand</code> essentially serves as a way to check if both the first
        operand and the operator have been inputted. If it’s <code>true</code>, the next numbers that
        the user enters will constitute the second operand.</li>
        </ul>
        <h2 id="update-the-display"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#update-the-display" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Update the display</h2>
        <p>At the moment, the calculator screen is blank. We need the contents of the
        <code>displayValue</code> property to be shown on the screen at all times. We will create a
        function for this purpose so that anytime an operation is performed in the app,
        we can always invoke it to update the screen with the contents of
        <code>displayValue</code>.</p>
        <p>Go ahead and type this below the <code>calculator</code> object:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">updateDisplay</span><span class="p">()</span> <span class="p">{</span>
          <span class="c1">// select the element with class of `calculator-screen`
        </span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">display</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.calculator-screen'</span><span class="p">);</span>
          <span class="c1">// update the value of the element with the contents of `displayValue`
        </span><span class="c1"></span>  <span class="nx">display</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">;</span>
        <span class="p">}</span>
        
        <span class="nx">updateDisplay</span><span class="p">();</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>If you look at the <abbr title="HyperText Markup Language">HTML</abbr> code for
        the app, you’ll see that the “screen” is really just a disabled text input:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">class</span><span class="o">=</span><span class="s">"calculator-screen"</span> <span class="na">value</span><span class="o">=</span><span class="s">""</span> <span class="na">disabled</span> <span class="p">/&gt;</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>We can’t type into it directly with the keyboard, but we can change its value
        with JavaScript. And that’s what the <code>updateDisplay</code> function does. Now you
        should see zero displayed on the screen of the calculator.</p>
        <aside class="tutorial-checkpoint f-alert" data-alert="Checkpoint">
        <p>
        Take a breather, and see the
        <a href="//jsfiddle.net/ayoisaiah/c2htznqg/2/" target="_blank" rel="noopener">complete code</a>
        at the end of this step.
        </p>
        </aside>
        <h2 id="handle-key-presses"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#handle-key-presses" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Handle key presses</h2>
        <p>We have four sets of keys on the calculator: digits (0-9), operators (+, −, ⨉,
        ÷, =), a decimal point (.) and a reset key (AC). In this section, we’ll listen
        for clicks on the calculator keys and determine what type of key was clicked.</p>
        <p>Add this code snippet at the bottom of the JavaScript tab:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">keys</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.calculator-keys'</span><span class="p">);</span>
        <span class="nx">keys</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
          <span class="c1">// Access the clicked element
        </span><span class="c1"></span>  <span class="kr">const</span> <span class="p">{</span> <span class="nx">target</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
        
          <span class="c1">// Check if the clicked element is a button.
        </span><span class="c1"></span>  <span class="c1">// If not, exit from the function
        </span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">target</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="s1">'button'</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>
        
          <span class="k">if</span> <span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s1">'operator'</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'operator'</span><span class="p">,</span> <span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>
        
          <span class="k">if</span> <span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s1">'decimal'</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'decimal'</span><span class="p">,</span> <span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>
        
          <span class="k">if</span> <span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s1">'all-clear'</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'clear'</span><span class="p">,</span> <span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>
        
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'digit'</span><span class="p">,</span> <span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
        <span class="p">});</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>In the above snippet, we’re listening for a <code>click</code> event on the element with a
        class of <code>calculator-keys</code>. Since all the keys on the calculator are children
        of this element, the <code>click</code> event filters down to them too. This is known as
        <em>event delegation</em>.</p>
        <p>Inside the callback function of the event listener, we extract the <code>target</code>
        property of the click event using <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">destructuring
        assignment</a>
        which makes it easy to unpack object properties into distinct variables.</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="p">{</span> <span class="nx">target</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
        <span class="c1">// is equivalent to
        </span><span class="c1"></span><span class="kr">const</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>The <code>target</code> variable is an object that represents the element that was clicked.
        If this element is not a button (such as if you click the spaces between the
        buttons), we will exit the function by returning early. Otherwise, the type of
        button that was clicked is logged to the console along with its value.</p>
        <p>Be sure to try this out before proceeding to the next step. Open up your browser console and
        click any of the buttons. The key’s type and value should be logged to the
        console accordingly.</p>
        <figure>
        <img src="https://ik.imagekit.io/freshman/js-calculator/handle-key-presses_zeH4Re2Egcb.gif" alt="The correct type of key is detected and logged to the console" loading="lazy" width="660" height="388">
        <figcaption class="figcaption">
        <p>The correct type of key is detected and logged to the console</p>
        </figcaption>
        </figure>
        <aside class="tutorial-checkpoint f-alert" data-alert="Checkpoint">
        <p>
        Take a breather, and see the
         <a href="//jsfiddle.net/ayoisaiah/c2htznqg/5/" target="_blank" rel="noopener">complete code</a>
        at the end of this step.
        </p>
        </aside>
        <h2 id="input-the-digits"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#input-the-digits" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Input the digits</h2>
        <p>In this step, we’ll make the digit buttons work so that when any of them is
        clicked, the corresponding value is displayed on the screen.</p>
        <figure>
        <img src="https://ik.imagekit.io/freshman/js-calculator/digit-feedback_8qMj1U3IB3P.gif" alt="Feedback is displayed to the user when a digit key is clicked" loading="lazy" width="538" height="555">
        </figure>
        <p>Since the <code>displayValue</code> property of the <code>calculator</code> object represents the
        input of the user, we need to modify it when any of the digits is clicked.
        Create a new function called <code>inputDigit</code> below the <code>calculator</code> object:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">inputDigit</span><span class="p">(</span><span class="nx">digit</span><span class="p">)</span> <span class="p">{</span>
          <span class="kr">const</span> <span class="p">{</span> <span class="nx">displayValue</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">calculator</span><span class="p">;</span>
          <span class="c1">// Overwrite `displayValue` if the current value is '0' otherwise append to it
        </span><span class="c1"></span>  <span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="nx">displayValue</span> <span class="o">===</span> <span class="s1">'0'</span> <span class="o">?</span> <span class="nx">digit</span> <span class="o">:</span> <span class="nx">displayValue</span> <span class="o">+</span> <span class="nx">digit</span><span class="p">;</span>
        <span class="p">}</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>Next, replace the following line in the <code>click</code> event listener callback function:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'digit'</span><span class="p">,</span> <span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>with the following code:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">inputDigit</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
        <span class="nx">updateDisplay</span><span class="p">();</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>In the <code>inputDigit</code> function, the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator">ternary
        operator</a>
        (<code>?</code>) is used to check if the current value displayed on the calculator is zero.
        If so, <code>calculator.displayValue</code> is overwritten with whatever digit was clicked.
        Otherwise, if <code>displayValue</code> is a non-zero number, the digit is appended to it
        through string concatenation.</p>
        <p>Finally, the <code>updateDisplay()</code> function is invoked so that the new contents of
        the <code>displayValue</code> property is reflected on the screen after each button is
        clicked. Try it out by clicking any of the digit buttons. The display should be
        updated with whatever digit you clicked.</p>
        <aside class="tutorial-checkpoint f-alert" data-alert="Checkpoint">
        <p>
        Take a breather, and see the
        <a href="//jsfiddle.net/ayoisaiah/c2htznqg/6/" target="_blank" rel="noopener">complete code</a>
        at the end of this step.
        </p>
        </aside>
        <h2 id="input-a-decimal-point"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#input-a-decimal-point" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Input a decimal point</h2>
        <p>When the decimal point key is clicked, we need to append a decimal point to
        whatever is displayed on the screen except if it already contains a decimal
        point.</p>
        <figure>
        <img src="https://ik.imagekit.io/freshman/js-calculator/input-decimals_4YqP4fA3j.gif" alt="Calculator showing decimal point being inputted" loading="lazy" width="476" height="555">
        </figure>
        <p>Here’s how we can achieve that. Create a new function called <code>inputDecimal</code>
        below <code>inputDigit</code>:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">inputDecimal</span><span class="p">(</span><span class="nx">dot</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// If the `displayValue` property does not contain a decimal point
        </span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">dot</span><span class="p">))</span> <span class="p">{</span>
            <span class="c1">// Append the decimal point
        </span><span class="c1"></span>    <span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">+=</span> <span class="nx">dot</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>Within the <code>inputDecimal</code> function, the
        <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/includes">includes()</a>
        method is used to check if <code>displayValue</code> does not already contain a decimal
        point. If so, a dot is appended to the number. Otherwise, the function exits.</p>
        <p>Following that, replace the following line in the keys' event listener callback
        function:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'decimal'</span><span class="p">,</span> <span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>with the following lines of code:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">inputDecimal</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
        <span class="nx">updateDisplay</span><span class="p">();</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>At this point, you should be able to add input a decimal point successfully and
        have it display on the screen.</p>
        <aside class="tutorial-checkpoint f-alert" data-alert="Checkpoint">
        <p>
        Take a breather, and see the
        <a href="//jsfiddle.net/c2htznqg/9/" target="_blank" rel="noopener">complete code</a>
        at the end of this step.
        </p>
        </aside>
        <h2 id="handling-operators"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#handling-operators" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Handling operators</h2>
        <p>The next step is to get the operators (+, −, ⨉, ÷, =) on the calculator working.
        There are three scenarios to account for:</p>
        <h3 id="1-when-a-user-hits-an-operator-after-entering-the-first-operand"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#1-when-a-user-hits-an-operator-after-entering-the-first-operand" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>1. When a user hits an operator after entering the first operand</h3>
        <p>At this point, the contents of <code>displayValue</code> should be stored under the
        <code>firstOperand</code> property and the <code>operator</code> property should be updated with
        whatever operator was clicked.</p>
        <p>Create a new function called <code>handleOperator</code> below <code>inputDecimal</code>:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">handleOperator</span><span class="p">(</span><span class="nx">nextOperator</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// Destructure the properties on the calculator object
        </span><span class="c1"></span>  <span class="kr">const</span> <span class="p">{</span> <span class="nx">firstOperand</span><span class="p">,</span> <span class="nx">displayValue</span><span class="p">,</span> <span class="nx">operator</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">calculator</span>
          <span class="c1">// `parseFloat` converts the string contents of `displayValue`
        </span><span class="c1"></span>  <span class="c1">// to a floating-point number
        </span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">inputValue</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">displayValue</span><span class="p">);</span>
        
          <span class="c1">// verify that `firstOperand` is null and that the `inputValue`
        </span><span class="c1"></span>  <span class="c1">// is not a `NaN` value
        </span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">firstOperand</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">inputValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="c1">// Update the firstOperand property
        </span><span class="c1"></span>    <span class="nx">calculator</span><span class="p">.</span><span class="nx">firstOperand</span> <span class="o">=</span> <span class="nx">inputValue</span><span class="p">;</span>
          <span class="p">}</span>
        
          <span class="nx">calculator</span><span class="p">.</span><span class="nx">waitingForSecondOperand</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="nx">calculator</span><span class="p">.</span><span class="nx">operator</span> <span class="o">=</span> <span class="nx">nextOperator</span><span class="p">;</span>
        <span class="p">}</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>When an operator key is pressed, the contents of <code>displayValue</code> is converted to
        a floating-point number (meaning a number with a decimal point) and the result
        is stored in the <code>firstOperand</code> property.</p>
        <p>The <code>operator</code> property is also set to whatever operator key was clicked while
        <code>waitingForSecondOperand</code> is set to <code>true</code> which indicates that the first
        operand has been entered and whatever digits the user enters next will
        constitute the second operand.</p>
        <p>At this point, it is useful to see how the properties of the <code>calculator</code> object
        are being updated on each button press. Add the following line to the end of
        both the <code>inputDigit</code> and <code>handleOperator</code> functions:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">calculator</span><span class="p">);</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>Then replace the following line in the keys' <code>click</code> event listener callback
        function:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'operator'</span><span class="p">,</span> <span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>with the following code:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">handleOperator</span><span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
        <span class="nx">updateDisplay</span><span class="p">();</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>At this point, try to construct a valid arithmetic operation by clicking the
        following keys in turn: <code>12 +</code>. Notice that when the <code>+</code> key is pressed, the
        values of <code>firstOperand</code> and <code>operator</code> properties are updated to <code>12</code> and <code>+</code>
        respectively while <code>waitingForSecondOperand</code> is set to true indicating that the
        calculator is now waiting for the second operand to be entered.</p>
        <figure>
        <img src="https://ik.imagekit.io/freshman/2020-07-13_09-09_Zm41vdZL4gT.jpg" alt="Console showing calculator object" loading="lazy" width="660" height="384">
        </figure>
        <p>If you try to enter the second operand, you will notice that it is appended to
        the first instead of overwriting it.</p>
        <figure>
        <img src="https://ik.imagekit.io/freshman/js-calculator/operator-scenario1-2_2bDZDiwdM.gif" alt="Calculator showing how the second operand is appended to the first" loading="lazy" width="432" height="539">
        </figure>
        <p>Let’s fix that by updating the <code>inputDigit</code> function as shown below:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">inputDigit</span><span class="p">(</span><span class="nx">digit</span><span class="p">)</span> <span class="p">{</span>
          <span class="kr">const</span> <span class="p">{</span> <span class="nx">displayValue</span><span class="p">,</span> <span class="nx">waitingForSecondOperand</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">calculator</span><span class="p">;</span>
        
          <span class="k">if</span> <span class="p">(</span><span class="nx">waitingForSecondOperand</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="nx">digit</span><span class="p">;</span>
            <span class="nx">calculator</span><span class="p">.</span><span class="nx">waitingForSecondOperand</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="nx">displayValue</span> <span class="o">===</span> <span class="s1">'0'</span> <span class="o">?</span> <span class="nx">digit</span> <span class="o">:</span> <span class="nx">displayValue</span> <span class="o">+</span> <span class="nx">digit</span><span class="p">;</span>
          <span class="p">}</span>
        
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">calculator</span><span class="p">);</span>
        <span class="p">}</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>If the <code>waitingForSecondOperand</code> property is set to <code>true</code>, the <code>displayValue</code>
        property is overwritten with the digit that was clicked. Otherwise, the same
        check is performed as before, overwriting or appending to <code>displayValue</code> as
        appropriate.</p>
        <aside class="tutorial-checkpoint f-alert" data-alert="Checkpoint">
        <p>
        Take a breather, and see the
        <a href="https://jsfiddle.net/ayoisaiah/v7usehxw/5/" target="_blank" rel="noopener">complete code</a>
        at the end of this step.
        </p>
        </aside>
        <h3 id="2-when-the-user-hits-an-operator-after-entering-the-second-operand"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#2-when-the-user-hits-an-operator-after-entering-the-second-operand" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>2. When the user hits an operator after entering the second operand</h3>
        <p>The second scenario we need to handle occurs when the user has entered the
        second operand and an operator key is clicked. At that point, all the
        ingredients to evaluate the expression is present so we need to do so and
        display the result on the screen. The <code>firstOperand</code> also needs to be updated so
        that the result can be reused in the next calculation.</p>
        <p>Create a new function called <code>calculate</code> below <code>handleOperator</code> as shown below:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">calculate</span><span class="p">(</span><span class="nx">firstOperand</span><span class="p">,</span> <span class="nx">secondOperand</span><span class="p">,</span> <span class="nx">operator</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">operator</span> <span class="o">===</span> <span class="s1">'+'</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">firstOperand</span> <span class="o">+</span> <span class="nx">secondOperand</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">operator</span> <span class="o">===</span> <span class="s1">'-'</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">firstOperand</span> <span class="o">-</span> <span class="nx">secondOperand</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">operator</span> <span class="o">===</span> <span class="s1">'*'</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">firstOperand</span> <span class="o">*</span> <span class="nx">secondOperand</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">operator</span> <span class="o">===</span> <span class="s1">'/'</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">firstOperand</span> <span class="o">/</span> <span class="nx">secondOperand</span><span class="p">;</span>
          <span class="p">}</span>
        
          <span class="k">return</span> <span class="nx">secondOperand</span><span class="p">;</span>
        <span class="p">}</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>This function takes the first operand, second operand and operator as arguments
        and checks the value of the operator to determine how the expression should be
        evaluated. If the operator is <code>=</code>, the second operand will be returned as is.</p>
        <p>Next, update the <code>handleOperator</code> function as shown below:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">handleOperator</span><span class="p">(</span><span class="nx">nextOperator</span><span class="p">)</span> <span class="p">{</span>
          <span class="kr">const</span> <span class="p">{</span> <span class="nx">firstOperand</span><span class="p">,</span> <span class="nx">displayValue</span><span class="p">,</span> <span class="nx">operator</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">calculator</span>
          <span class="kr">const</span> <span class="nx">inputValue</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">displayValue</span><span class="p">);</span>
        
          <span class="k">if</span> <span class="p">(</span><span class="nx">firstOperand</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">inputValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">calculator</span><span class="p">.</span><span class="nx">firstOperand</span> <span class="o">=</span> <span class="nx">inputValue</span><span class="p">;</span>
        <span class="hl">  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">operator</span><span class="p">)</span> <span class="p">{</span>
        </span><span class="hl">    <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">calculate</span><span class="p">(</span><span class="nx">firstOperand</span><span class="p">,</span> <span class="nx">inputValue</span><span class="p">,</span> <span class="nx">operator</span><span class="p">);</span>
        </span><span class="hl">
        </span><span class="hl">    <span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
        </span><span class="hl">    <span class="nx">calculator</span><span class="p">.</span><span class="nx">firstOperand</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>
        </span><span class="hl">  <span class="p">}</span>
        </span>
          <span class="nx">calculator</span><span class="p">.</span><span class="nx">waitingForSecondOperand</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="nx">calculator</span><span class="p">.</span><span class="nx">operator</span> <span class="o">=</span> <span class="nx">nextOperator</span><span class="p">;</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">calculator</span><span class="p">);</span>
        <span class="p">}</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>The <code>else if</code> block added to <code>handleOperator</code> checks if the <code>operator</code> property
        has been assigned an operator. If so, the <code>calculate</code> function is invoked and
        the result is saved in the <code>result</code> variable.</p>
        <p>This result is subsequently displayed to the user by updating the <code>displayValue</code>
        property. Also, the value of <code>firstOperand</code> is updated to the result so that it
        may be used in the next calculator.</p>
        <p>Try it out. Enter <code>12 + 10 =</code> in the calculator and notice that the correct
        result is displayed on the screen. It also works when you chain a string of
        operations. So <code>5 * 20 - 14 =</code> should give <code>86</code> as the result.</p>
        <figure>
        <img src="https://ik.imagekit.io/freshman/js-calculator/operator-scenario2-2_FQiX3y2kp.gif" alt="Calculator showing the result of 5 * 20 - 14" loading="lazy" width="432" height="539">
        </figure>
        <p>This is because hitting the minus key triggers the calculation of the first
        operation (<code>5 * 20</code>) whose result (<code>100</code>) is subsequently set as the
        <code>firstOperand</code> for the next calculation so by the time we enter <code>14</code> as the
        second operand and hit the <code>=</code> key, the <code>calculate</code> function is executed again
        giving <code>86</code> as the result which is also set as the <code>firstOperand</code> for the next
        operation, and so on.</p>
        <aside class="tutorial-checkpoint f-alert" data-alert="Checkpoint">
        <p>
        Take a breather, and see the
        <a href="https://jsfiddle.net/ayoisaiah/v7usehxw/8/" target="_blank" rel="noopener">complete code</a>
        at the end of this step.
        </p>
        </aside>
        <h3 id="3-when-two-or-more-operators-are-entered-consecutively"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#3-when-two-or-more-operators-are-entered-consecutively" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>3. When two or more operators are entered consecutively</h3>
        <p>It’s quite common to change one’s mind about the type of operation one wants to
        perform so the calculator must handle this properly.</p>
        <p>Let’s say you want to add seven and two together, you will click <code>7 + 2 =</code> which
        will produce the correct result. But let’s assume after hitting <code>7 +</code>, you
        change your mind and decide to subtract 2 from 7. Instead of clearing the
        calculator and starting all over, you should be able to hit <code>-</code> to override the
        <code>+</code> that was previously entered.</p>
        <p>Remember that at the point the operator is entered, <code>waitingForSecondOperand</code>
        will be set to <code>true</code> since the calculator expects a second operand to be
        entered after the operator key. We can use this quality to update the operator
        key and prevent any calculations until the second operand has been inputted.</p>
        <p>Modify the <code>handleOperator</code> function to look like this:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">handleOperator</span><span class="p">(</span><span class="nx">nextOperator</span><span class="p">)</span> <span class="p">{</span>
          <span class="kr">const</span> <span class="p">{</span> <span class="nx">firstOperand</span><span class="p">,</span> <span class="nx">displayValue</span><span class="p">,</span> <span class="nx">operator</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">calculator</span>
          <span class="kr">const</span> <span class="nx">inputValue</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">displayValue</span><span class="p">);</span>
        
        <span class="hl">  <span class="k">if</span> <span class="p">(</span><span class="nx">operator</span> <span class="o">&amp;&amp;</span> <span class="nx">calculator</span><span class="p">.</span><span class="nx">waitingForSecondOperand</span><span class="p">)</span>  <span class="p">{</span>
        </span><span class="hl">    <span class="nx">calculator</span><span class="p">.</span><span class="nx">operator</span> <span class="o">=</span> <span class="nx">nextOperator</span><span class="p">;</span>
        </span><span class="hl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">calculator</span><span class="p">);</span>
        </span><span class="hl">    <span class="k">return</span><span class="p">;</span>
        </span><span class="hl">  <span class="p">}</span>
        </span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">firstOperand</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">inputValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">calculator</span><span class="p">.</span><span class="nx">firstOperand</span> <span class="o">=</span> <span class="nx">inputValue</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">operator</span><span class="p">)</span> <span class="p">{</span>
            <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">calculate</span><span class="p">(</span><span class="nx">firstOperand</span><span class="p">,</span> <span class="nx">inputValue</span><span class="p">,</span> <span class="nx">operator</span><span class="p">);</span>
            <span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
            <span class="nx">calculator</span><span class="p">.</span><span class="nx">firstOperand</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>
          <span class="p">}</span>
        
          <span class="nx">calculator</span><span class="p">.</span><span class="nx">waitingForSecondOperand</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="nx">calculator</span><span class="p">.</span><span class="nx">operator</span> <span class="o">=</span> <span class="nx">nextOperator</span><span class="p">;</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">calculator</span><span class="p">);</span>
        <span class="p">}</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>The relevant change is highlighted above. The <code>if</code> statement checks if an
        <code>operator</code> already exists and if <code>waitingForSecondOperand</code> is set to <code>true</code>. If
        so, the value of the <code>operator</code> property is replaced with the new operator and
        the function exits so that no calculations are performed.</p>
        <p>Try it out. Click multiple operators after entering some digits and monitor the
        calculator object in the console. Notice that the <code>operator</code> property is updated
        each time and no calculations are performed until you provide the second
        operand.</p>
        <aside class="tutorial-checkpoint f-alert" data-alert="Checkpoint">
        <p>
        Take a breather, and see the
        <a href="https://jsfiddle.net/ayoisaiah/v7usehxw/9/" target="_blank" rel="noopener">complete code</a>
        at the end of this step.
        </p>
        </aside>
        <h2 id="reset-the-calculator"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#reset-the-calculator" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Reset the calculator</h2>
        <p>The final task is to make sure the user can reset the calculator to its initial
        state by pressing a key. In most calculators, the <code>AC</code> button is used to reset
        the calculator to its default state, so that’s what we’re going to do here.</p>
        <p>Go ahead and create a new function below <code>calculate</code> as shown below:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">resetCalculator</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="s1">'0'</span><span class="p">;</span>
          <span class="nx">calculator</span><span class="p">.</span><span class="nx">firstOperand</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="nx">calculator</span><span class="p">.</span><span class="nx">waitingForSecondOperand</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="nx">calculator</span><span class="p">.</span><span class="nx">operator</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">calculator</span><span class="p">);</span>
        <span class="p">}</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>Then replace the following line in the keys' event listener callback function:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'all clear'</span><span class="p">,</span> <span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>with the following code:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">resetCalculator</span><span class="p">();</span>
        <span class="nx">updateDisplay</span><span class="p">();</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>The <code>resetCalculator</code> function sets all the properties of the <code>calculator</code>
        object to their original values. Clicking the <code>AC</code> key on the calculator should
        now work as expected. You can check the <code>calculator</code> object in the console to
        confirm.</p>
        <aside class="tutorial-checkpoint f-alert" data-alert="Checkpoint">
        <p>
        Take a breather, and see the
        <a href="https://jsfiddle.net/ayoisaiah/v7usehxw/11/" target="_blank" rel="noopener">complete code</a>
        at the end of this step.
        </p>
        </aside>
        <h2 id="fix-decimal-bug"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#fix-decimal-bug" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Fix decimal bug</h2>
        <p>If you enter a decimal point after clicking on an operator, it gets appended to
        the first operand instead of being a part of the second.</p>
        <figure>
        <img src="https://ik.imagekit.io/freshman/js-calculator/decimal-bug_QQiFGt0Cn26.gif" alt="Calculator gif showing decimal bug" loading="lazy" width="432" height="539">
        </figure>
        <p>We can fix this bug by making the following modification to the <code>inputDecimal</code>
        function:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">inputDecimal</span><span class="p">(</span><span class="nx">dot</span><span class="p">)</span> <span class="p">{</span>
        <span class="hl">  <span class="k">if</span> <span class="p">(</span><span class="nx">calculator</span><span class="p">.</span><span class="nx">waitingForSecondOperand</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        </span><span class="hl">  	<span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="s1">'0.'</span>
        </span><span class="hl">    <span class="nx">calculator</span><span class="p">.</span><span class="nx">waitingForSecondOperand</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        </span><span class="hl">    <span class="k">return</span>
        </span><span class="hl">  <span class="p">}</span>
        </span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">dot</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">+=</span> <span class="nx">dot</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>If <code>waitingForSecondOperand</code> is set to <code>true</code> and a decimal point is entered,
        <code>displayValue</code> becomes <code>0.</code> and <code>waitingForSecondOperand</code> is set to false so
        that any additional digits are appended as part of the second operand.</p>
        <figure>
        <img src="https://ik.imagekit.io/freshman/ezgif-5-9a6cc35a247b_iAWVQLrY2ih.gif" alt="GIF showing fixed bug" loading="lazy" width="400" height="494">
        <figcaption class="figcaption">
        <p>The bug is now fixed</p>
        </figcaption>
        </figure>
        <aside class="tutorial-checkpoint f-alert" data-alert="Checkpoint">
        <p>
        Take a breather, and see the
        <a href="https://jsfiddle.net/ayoisaiah/v7usehxw/17/" target="_blank" rel="noopener">complete code</a>
        at the end of this step.
        </p>
        </aside>
        <h2 id="refactor-the-event-listener"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#refactor-the-event-listener" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Refactor the event listener</h2>
        <p>Update the keys' event listener as shown below. All the <code>if</code> blocks have
        been replaced with a single <code>switch</code> block, and <code>updateDisplay()</code> is called only
        once at the end of the function.</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">keys</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="nx">event</span> <span class="p">=&gt;</span> <span class="p">{</span>
          <span class="kr">const</span> <span class="p">{</span> <span class="nx">target</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
          <span class="kr">const</span> <span class="p">{</span> <span class="nx">value</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">target</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">target</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="s1">'button'</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>
        
          <span class="k">switch</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="s1">'+'</span><span class="o">:</span>
            <span class="k">case</span> <span class="s1">'-'</span><span class="o">:</span>
            <span class="k">case</span> <span class="s1">'*'</span><span class="o">:</span>
            <span class="k">case</span> <span class="s1">'/'</span><span class="o">:</span>
            <span class="k">case</span> <span class="s1">'='</span><span class="o">:</span>
              <span class="nx">handleOperator</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
              <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="s1">'.'</span><span class="o">:</span>
              <span class="nx">inputDecimal</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
              <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="s1">'all-clear'</span><span class="o">:</span>
              <span class="nx">resetCalculator</span><span class="p">();</span>
              <span class="k">break</span><span class="p">;</span>
            <span class="k">default</span><span class="o">:</span>
              <span class="c1">// check if the key is an integer
        </span><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="nb">Number</span><span class="p">.</span><span class="nx">isInteger</span><span class="p">(</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">value</span><span class="p">)))</span> <span class="p">{</span>
                <span class="nx">inputDigit</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
              <span class="p">}</span>
          <span class="p">}</span>
        
          <span class="nx">updateDisplay</span><span class="p">();</span>
        <span class="p">});</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>This way, it’s a lot easier to add new functions to the calculator and you no
        longer need to invoke the <code>updateDisplay()</code> function after each operation.</p>
        <aside class="tutorial-checkpoint f-alert" data-alert="Checkpoint">
        <p>
        Take a breather, and see the
        <a href="https://jsfiddle.net/ayoisaiah/v7usehxw/28/" target="_blank" rel="noopener">complete code</a>
        at the end of this step.
        </p>
        </aside>
        <h2 id="floating-point-precision"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#floating-point-precision" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Floating-point precision</h2>
        <p>I’d like to bring your attention to a problem that occurs when the result of an
        operation is a floating number. For example, <code>0.1 + 0.2</code> produces
        <code>0.30000000000000004</code> instead of <code>0.3</code> as you’d probably expect.</p>
        <figure>
        <img src="https://ik.imagekit.io/freshman/ezgif-5-e66b9bec67d3_MWjI2TI7gxZ.gif" alt="Floating-point precision bug" loading="lazy" width="400" height="494">
        </figure>
        <p>In other cases, you get the expected result. <code>0.1 + 0.4</code> yields <code>0.5</code> for
        example. A detailed explaination for why this happens can be found
        <a href="https://floating-point-gui.de/basic/">here</a>. Make sure you read it.</p>
        <p>One of the potential solutions to this problem suggested in the above linked
        page is to format the result to a fixed number of decimal places so that the
        others are discarded. We can combine the JavaScript
        <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/parseFloat">parseFloat</a>
        function with the
        <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed">Number.toFixed</a> method to implement this solution in our calculator app.</p>
        <p>In the <code>handleOperator</code> function, replace the following line:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>with the following code:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">calculator</span><span class="p">.</span><span class="nx">displayValue</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>The <code>toFixed()</code> method accepts a value between 0 and 20, and ensures that the
        number of digits after the decimal point is restricted to that value. The
        return value may be rounded or padded with zeros if necessary.</p>
        <p>In the earlier example, <code>0.1 + 0.2</code> yielded <code>0.30000000000000004</code>. Using
        <code>toFixed(7)</code> on the result will restrict the digits after the decimal point to
        seven digits:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="mf">0.30000000000000004</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="c1">// 0.3000000
        </span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>Those extra zeros are not important, so we can use <code>parseFloat</code> to get rid of
        them:</p>
        <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">parseFloat</span><span class="p">(</span><span class="mf">0.30000000000000004</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span> <span class="c1">// 0.3
        </span></code></pre><button class="copy-code js-copy">Copy</button></div>
        <p>And that’s how we’re able to fix this problem in our application. I chose the
        number 7 in this case because it’s a good enough precision for this calculator
        app. A greater amount of precision may be required in other situations.</p>
        <figure>
        <img src="https://ik.imagekit.io/freshman/ezgif-5-6dc6d9f5db96_CMDcy3oNk.gif" alt="GIF showing fixed floating-point precision" loading="lazy" width="400" height="502">
        <figcaption class="figcaption">
        <p>As an added bonus, the result now fits on the screen</p>
        </figcaption>
        </figure>
        <aside class="tutorial-checkpoint f-alert" data-alert="Checkpoint">
        <p>
        Take a breather, and see the
        <a href="https://jsfiddle.net/ayoisaiah/v7usehxw/27/" target="_blank" rel="noopener">complete code</a>
        at the end of this step.
        </p>
        </aside>
        <h2 id="bonus-content"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#bonus-content" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Bonus content</h2>
        <p>I have prepared some further enhancements to this calculator app for my Patreon
        supporters. The following functions were added to the app: sin, cos, tan, log,
        square, square root, factorial, percent, plus/minus, π and ce.</p>
        <figure>
        <img src="https://ik.imagekit.io/freshman/2020-07-17_11-58_PCW-Yk6F0.png" alt="JavaScript Calculator Bonus" loading="lazy" width="660" height="557">
        
        </figure>
        
        <h2 id="conclusion"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="§" href="#conclusion" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Conclusion</h2>
        <p>That concludes my tutorial, I hope you learnt a lot from it. </p>
        <p>Thanks for reading, and happy coding!</p>
        
        </section>
    </code>
    </pre>

    </p>
    </body>
</html>
